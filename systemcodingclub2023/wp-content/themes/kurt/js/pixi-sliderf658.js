window.CanvasSlideshow=function(e){var t=this;(e=e||{}).images=e.hasOwnProperty("images")?e.images:[],e.container=e.hasOwnProperty("slider")?e.container:"#pixi-slider",e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.pixiSprites=e.hasOwnProperty("sprites")?e.sprites:[],e.autoPlay=!!e.hasOwnProperty("autoPlay")&&e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:[10,3],e.displaceScale=e.hasOwnProperty("displaceScale")?e.displaceScale:[200,70],e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:CtKurtDmap.url,e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".slider-nav"),e.displaceAutoFit=!e.hasOwnProperty("displaceAutoFit")||e.displaceAutoFit,e.interactive=!!e.hasOwnProperty("interactive")&&e.interactive,e.interactionEvent=e.hasOwnProperty("interactionEvent")?e.interactionEvent:"",e.displaceScaleTo=!1===e.autoPlay?[0,0]:[20,20],e.displacementCenter=!!e.hasOwnProperty("displacementCenter")&&e.displacementCenter,e.dispatchPointerOver=!!e.hasOwnProperty("dispatchPointerOver")&&e.dispatchPointerOver,e.sliderWrapper=e.hasOwnProperty("slideWrapper")?e.slideWrapper:$(".slider-wrapper");var a=new PIXI.autoDetectRenderer({width:e.stageWidth,height:e.stageHeight,transparent:!0}),n=new PIXI.Container,i=new PIXI.Container,r=new PIXI.Sprite.from(e.displacementImage),l=new PIXI.filters.DisplacementFilter(r);this.currentIndex=0,this.initPixi=function(){document.getElementById("canvas-container").appendChild(a.view),n.addChild(i),n.interactive=!0,a.view.style.position="absolute",a.view.style.objectFit="cover",a.view.style.width="100%",a.view.style.height="100%",a.view.style.top="50%",a.view.style.left="50%",a.view.style.webkitTransform="translate( -50%, -50% ) scale(1.01)",a.view.style.transform="translate( -50%, -50% ) scale(1.01)",r.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,n.filters=[l],!1===e.autoPlay&&(l.scale.x=0,l.scale.y=0),r.scale.x=2,r.scale.y=2,l.autoFit=e.displaceAutoFit,n.addChild(r)},this.loadPixiSprites=function(t){for(var n=[],r=0;r<t.length;r++){var l=t[r];n.push(l.getAttribute("src"))}e.sprites=n;var o=e.sprites,s=[];imagesSprites=null;for(r=0;r<o.length;r++){var c=new PIXI.Texture.from(t[r]),p=new PIXI.Sprite(c);p.anchor.set(.5),p.x=a.width/2,p.y=a.height/2,0!==r&&TweenMax.set(p,{alpha:0}),i.addChild(p),s.push(p)}!function(t){imagesLoaded($(e.container),function(){for(var a=0;a<t.length;a++){var n=t[a];n.scale.set(e.stageWidth/n.width)}})}(s)},render=new PIXI.Ticker,render.autoStart=!1,render.add(function(t){r.x+=e.autoPlaySpeed[0]*t,r.y+=e.autoPlaySpeed[1],a.render(n)}),render.start();var o=!1,s=i.children;this.moveSlider=function(a,n){o=!0;var i,r,c=e.sprites.length-1;"next"==n?0==a?(i=e.sliderWrapper.children().eq(c).children(".slide-content"),r=e.sliderWrapper.children().eq(a).children(".slide-content")):(i=e.sliderWrapper.children().eq(a-1).children(".slide-content"),r=e.sliderWrapper.children().eq(a).children(".slide-content")):a==c?(i=e.sliderWrapper.children().eq(0).children(".slide-content"),r=e.sliderWrapper.children().eq(a).children(".slide-content")):(i=e.sliderWrapper.children().eq(a+1).children(".slide-content"),r=e.sliderWrapper.children().eq(a).children(".slide-content"));var p=new TimelineMax({onComplete:function(){t.currentIndex=a,o=!1,render.stop()},onStart:function(){render.start();var e=i.find(".item-title"),t=r.find(".item-title"),l=i.find(".item-cat"),o=r.find(".item-cat"),s=i.find(".item-link"),p=r.find(".item-link"),d=$(".slider-count .current"),h=$(".arrows-wrap .progress-bar").find(".progress"),u=100/c;h.css("width",u*a+"%");var y=new TimelineMax,f=new TimelineMax({delay:1}),m=new TimelineMax;setTimeout(function(){var e=1+a;e<10?d.text("0"+e):d.text(e)},1e3),"next"==n?(e.find("span span").each(function(e,t){y.fromTo(t,.6,{autoAlpha:1},{autoAlpha:0,delay:.1,ease:Power2.easeOut},.05*e)}),t.find("span span").each(function(e,t){f.fromTo(t,.6,{autoAlpha:0},{autoAlpha:1,delay:.1,ease:Power2.easeOut},.05*e)}),m.fromTo(l,.3,{y:0,autoAlpha:1},{y:"-30px",autoAlpha:0},0).fromTo(s,.3,{y:0,autoAlpha:1},{y:"30px",autoAlpha:0},0).fromTo(d,.6,{y:0,autoAlpha:1},{y:"-30px",autoAlpha:0},0),m.to(i.find(".slide-content-inner"),1,{display:"none"},0).to(r.find(".slide-content-inner"),1,{display:"block"},0).fromTo(o,.3,{y:"-30px",autoAlpha:0},{y:"0px",autoAlpha:1},1).fromTo(p,.3,{y:"30px",autoAlpha:0},{y:"0px",autoAlpha:1},1).set(d,{y:"30px",autoAlpha:0},1).to(d,.6,{y:0,autoAlpha:1},1)):(e.find("span span").each(function(e,t){y.fromTo(t,.6,{autoAlpha:1},{autoAlpha:0,delay:.1,ease:Power2.easeOut},.05*e)}),t.find("span span").each(function(e,t){f.fromTo(t,.6,{autoAlpha:0},{autoAlpha:1,delay:.1,ease:Power2.easeOut},.05*e)}),m.fromTo(l,.3,{y:0,autoAlpha:1},{y:"-30px",autoAlpha:0},0).fromTo(s,.3,{y:0,autoAlpha:1},{y:"30px",autoAlpha:0},0).fromTo(d,.6,{y:0,autoAlpha:1},{y:30,autoAlpha:0},0).to(i.find(".slide-content-inner"),1,{display:"none"},0),m.to(r.find(".slide-content-inner"),1,{display:"block"},0).fromTo(o,.3,{y:"-30px",autoAlpha:0},{y:"0px",autoAlpha:1},1).fromTo(p,.3,{y:"30px",autoAlpha:0},{y:"0px",autoAlpha:1},1).set(d,{y:"-30px",autoAlpha:0},1).to(d,.6,{y:0,autoAlpha:1},1))}});p.clear(),p.isActive()||p.to(l.scale,1,{x:e.displaceScale[0],y:e.displaceScale[1]}).to(s[t.currentIndex],.5,{alpha:0}).to(s[a],.5,{alpha:1},1).to(l.scale,1,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1]})};var c=e.navElement;function p(){t.currentIndex>=0&&t.currentIndex<s.length-1?t.moveSlider(t.currentIndex+1,"next"):t.moveSlider(0,"next")}function d(){t.currentIndex>0&&t.currentIndex<s.length?t.moveSlider(t.currentIndex-1,"prev"):t.moveSlider(s.length-1,"prev")}for(var h=0;h<c.length;h++){c[h].onclick=function(e){return!o&&("next"===this.getAttribute("data-nav")?p():d(),!1)}}$(e.container).on("mousewheel DOMMouseScroll",function(e){if(o)return!1;e.originalEvent.wheelDelta>50||e.originalEvent.detail<-2?d():(e.originalEvent.wheelDelta<-50||e.originalEvent.detail>2)&&p()}),function(){document.addEventListener("touchstart",function(t){e=t.touches[0].clientX},!1),document.addEventListener("touchmove",function(t){if(e&&!o){var a=t.touches[0].clientX,n=e-a;n>10?p():n<-10&&d(),e=null}},!1);var e=null}(),this.init=function(){var a;t.initPixi(),t.loadPixiSprites($(e.images)),function(){var t=e.sprites.length;totalCount=t<=9?"0"+t:t;var a="<div class='slider-count'><span class='current'>01</span><span class='total'>"+totalCount+"</span></div>";$("#pixi-slider").append(a)}(),(a=new TimelineMax({onStart:function(){o=!0},onComplete:function(){o=!1}})).to(l.scale,1.5,{x:e.displaceScale[0],y:e.displaceScale[1]}).to(l.scale,1,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1]}),$(window).on("load",function(){a.clear(),a.to(l.scale,1.5,{x:e.displaceScale[0],y:e.displaceScale[1]}).to(l.scale,1,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1]})})},!0===e.displacementCenter&&(r.anchor.set(.5),r.x=a.view.width/2,r.y=a.view.height/2),this.init()},PIXI.utils.skipHello();
